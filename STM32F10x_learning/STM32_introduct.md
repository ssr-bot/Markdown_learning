# 初识STM32
## STM32是什么
#
STM32中，ST 是意法半导体，M 是 Microelectronics 的缩写，32 表示 32 位，合起来理解就是 ST 公司开发的 32 位微控制器。在如今的 32 位控制器当中，STM32 大受工程师和市场的青睐，无芯能出其右。
## STM32能做什么
#
STM32 属于一个微控制器，自带了各种常用通信接口，比如 USART、I2C、SPI 等，可接非常多的传感器，可以控制很多的设备。现实生活中，我们接触到的很多电器产品都有 STM32 的身影，比如智能手环，微型四轴飞行器，平衡车、移动 POST 机，智能电饭锅，3D 打印机等等。
## STM芯片里面有什么？
#
### ICode 总线
ICode 中的 I 表示 Instruction，即指令。我们写好的程序编译之后都是一条条指令，存放在 FLASH
中，内核要读取这些指令来执行程序就必须通过 ICode 总线，它几乎每时每刻都需要被使用，它
是专门用来取指的。

### 驱动单元
首先是DCode 总线。DCode 中的 D 表示 Data，即数据，那说明这条总线是用来取数的。我们在写程序的时候，数据有常量和变量两种，常量就是固定不变的，用 C 语言中的 const 关键字修饰，是放到内部的 FLASH当中的，变量是可变的，不管是全局变量还是局部变量都放在内部的 SRAM。因为数据可以被Dcode 总线和 DMA 总线访问，所以为了避免访问冲突，在取数的时候需要经过一个总线矩阵来仲裁，决定哪个总线在取数。  
其次是系统总线。系统总线主要是访问外设的寄存器，我们通常说的寄存器编程，即读写寄存器都是通过这根系统总线来完成的。  
最后是DMA总线。DMA 总线也主要是用来传输数据，这个数据可以是在某个外设的数据寄存器，可以在 SRAM，可以在内部的 FLASH。因为数据可以被 Dcode 总线和 DMA 总线访问，所以为了避免访问冲突，
在取数的时候需要经过一个总线矩阵来仲裁，决定哪个总线在取数。 

### 被动单元
首先是内部的闪存存储器。内部的闪存存储器FLASH，我们编写好的程序就放在这个地方。内核通过 ICode 总线来取里面的指令。  
其次是内部的 SRAM。内部的 SRAM，即我们通常说的 RAM，程序的变量，堆栈等的开销都是基于内部的SRAM。内核通过 DCode 总线来访问它。  
再次是FSMC。FSMC 的英文全称是 Flexible static memory controller ，叫灵活的静态的存储器控制器，是 STM32F10xx 中一个很有特色的外设，通过 FSMC，我们可以扩展内存，如外部的 SRAM，NANDFLASH 和 NORFLASH 。但有一点我们要注意的是，FSMC 只能扩展静态的内存，即名称里面的S：static，不能是动态的内存，比如 SDRAM 就不能扩展。  
最后是AHB 到 APB 的桥。从 AHB 总线延伸出来的两条 APB2 和 APB1 总线，上面挂载着 STM32 各种各样的特色外设。我们经常说的 GPIO、串口、I2C、SPI 这些外设就挂载在这两条总线上，这个是我们学习STM32 的重点，就是要学会编程这些外设去驱动外部的各种设备。
